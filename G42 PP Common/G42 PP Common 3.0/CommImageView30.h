// This is a new CommImageView (3.0) under construction#pragma once#include <LView.h>#include "gtype.h"#include "giimage.h"	// Need this????#include "ginotify.h"class G42MapController;class G42SurfaceController;class G42PPSurfaceController;const PowerPlant_Scrollbar_Size = 16;class CommImageView30 : public LView, public G42Notifier, public LPeriodical{public:	enum 						{class_ID = 'G42c'};								CommImageView30 (LStream *inStream); 	virtual			 		~CommImageView30 ();	virtual void 			AdjustCursorSelf (Point inPortPt, const EventRecord &inMacEvent);	void 						ClickSelf (const SMouseDownEvent &inMouseDown);	Boolean					ClickTimesAreClose (Uint32 inLastClickTime);		G42Image					*GetImage (void);	G42MapController		*GetMapController (void) {return MapController;}	G42SurfaceController *GetSurfaceController (void) 		{return (G42SurfaceController *) SurfaceController;};	Boolean					HandleKeyPress (const EventRecord &inKeyEvent); // Not inherited	virtual	bool			ProcessMessage (G42NotifyMessage *message);	#ifdef OLDWAY	virtual Boolean		SetImage (LCommander *commander, G42Image *image,								G42SingleImageViewer *singleViewer);	#endif		void 						SetScale (const float scale);	virtual void 			SpendTime (const EventRecord & inMacEvent);	/*  Static members last  */	static CommImageView30 *CreateImageViewStream (LStream * inStream);	static LWindow 			*GetWindowFromView (LView *view);	#ifdef OLDWAY	static short				sWindowBorder;	#endifprotected:	virtual void				DrawSelf (void);	void  						FinishCreateSelf (void);	long							LastClickTime;	G42MapController			*MapController;	//  TO BE moved into subclass (?) 	void 							ResizeFrameBy (Int16 inWidthDelta, Int16 inHeightDelta, Boolean inRefresh);	float							Scale;	G42PPSurfaceController 	*SurfaceController;		//  TO BE moved into subclass (?) 	LWindow 						*Window;	#ifdef NOTYET // TBD - Holdovers from last version	int16							LastCursorX;	int16							LastCursorY;	LCommander					*Commander;	#endif};