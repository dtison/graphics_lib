#pragma once#include <LListener.h>#include "g42imap.h"#include "CommEditURLDlg.h"#include "CommWebImageObject.h"class	CommMapController : public LListener{public:						CommMapController (LCommander *commander, 						CommWebImageObject *wiObject, LWindow *mapDialog);	virtual			~CommMapController (void);	virtual void	ListenToMessage (MessageT inMessage, void *ioParam);	void				AddMapElement (void);	/*  (Prev) Static things to handle mapping  */	virtual bool	AddMapElement (G42ImageMap::G42MapElement & element);	void				MapSelChanged (void);		virtual void	EditMapElement (uint index);	void				EditURL (G42ImageMap *map, uint index);	DlgStatus		EditURLDialog (LCommander *inSuper, CommEditURLInfo *info);	virtual void	Delete (void);	// Public so we can do keyboard delete'sprotected:	LWindow			*MapDialog;	LListBox 		*ListBox;	ListHandle		TheListHandle;	LCommander		*ActiveCommander;	CommWebImageObject *ActiveWIObject;	G42ImageMap 	*ActiveMap;	void				UpdateListBox (short selectIndex = -1, Boolean redrawMap = false, 						Boolean redrawDocument = false, Boolean refreshButtons = false);	void				MoveElement (Boolean moveUp);	void				Edit (void);	void				AddDefault (void);	void				SetupButtons (void);	virtual void	DoubleClick (void);private:	short				GetCellSelectionAsIndex (Boolean &found);};